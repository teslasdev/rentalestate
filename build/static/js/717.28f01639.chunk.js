"use strict";(self.webpackChunkclient360=self.webpackChunkclient360||[]).push([[717],{58717:function(e,t,i){i.r(t),i.d(t,{default:function(){return G}});var a=i(47313),n=i(9019),r=i(19860),s=i(17592),o=i(41806),l=i(61113),c=i(48119),d=i(33497),h=i(73428),x=i(93405),p=i(84488),m=i(46417);var g=()=>(0,m.jsx)(h.Z,{children:(0,m.jsx)(x.Z,{children:(0,m.jsxs)(n.ZP,{container:!0,direction:"column",children:[(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsxs)(n.ZP,{container:!0,justifyContent:"space-between",children:[(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(p.Z,{variant:"rectangular",width:44,height:44})}),(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(p.Z,{variant:"rectangular",width:34,height:34})})]})}),(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(p.Z,{variant:"rectangular",sx:{my:2},height:40})}),(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(p.Z,{variant:"rectangular",height:30})})]})})}),u=i(6210),j=i(96710);const Z=(0,s.ZP)(d.Z)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.secondary.dark,color:"#fff",overflow:"hidden",position:"relative","&:after":{content:'""',position:"absolute",width:210,height:210,borderRadius:"50%",top:-85,right:-95,[t.breakpoints.down("sm")]:{top:-105,right:-140}},"&:before":{zIndex:-1,content:'""',position:"absolute",width:210,height:210,background:t.palette.secondary[800],borderRadius:"50%",top:-125,right:-15,opacity:.5,[t.breakpoints.down("sm")]:{top:-155,right:-70}}}}));var y=e=>{let{isLoading:t,contactData:i}=e;const a=(0,r.Z)();return(0,m.jsx)(m.Fragment,{children:t?(0,m.jsx)(g,{}):(0,m.jsx)(Z,{border:!1,content:!1,children:(0,m.jsx)(o.Z,{sx:{p:2.25},children:(0,m.jsxs)(n.ZP,{container:!0,direction:"column",children:[(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsxs)(n.ZP,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(l.Z,{sx:{fontSize:"2.125rem",fontWeight:500,mr:1,mt:1.75,mb:.75},children:i.length})}),(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(c.Z,{sx:{cursor:"pointer",...a.typography.smallAvatar,backgroundColor:a.palette.secondary[200],color:a.palette.secondary.dark},children:(0,m.jsx)(j.Z,{fontSize:"inherit"})})})]})}),(0,m.jsx)(n.ZP,{item:!0,sx:{mb:1.25},children:(0,m.jsx)(l.Z,{sx:{fontSize:"1rem",fontWeight:500,color:a.palette.secondary.light,textAlign:"center"},children:"Total Contacts"})})]})})})})},b=i(85554),v=i(7910),f=i.n(v),P=i(58446);var w=i(5842);const k=(0,s.ZP)(d.Z)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.primary.dark,color:"#fff",overflow:"hidden",position:"relative","&>div":{position:"relative",zIndex:5},"&:after":{content:'""',position:"absolute",width:210,height:210,background:t.palette.primary[800],borderRadius:"50%",zIndex:1,top:-85,right:-95,[t.breakpoints.down("sm")]:{top:-105,right:-140}},"&:before":{content:'""',position:"absolute",zIndex:1,width:210,height:210,background:t.palette.primary[800],borderRadius:"50%",top:-125,right:-15,opacity:.5,[t.breakpoints.down("sm")]:{top:-155,right:-70}}}}));var C=e=>{let{isLoading:t,leadData:i}=e;const a=(0,r.Z)();return(0,m.jsx)(m.Fragment,{children:t?(0,m.jsx)(g,{}):(0,m.jsx)(k,{border:!1,content:!1,children:(0,m.jsx)(o.Z,{sx:{p:2.25},children:(0,m.jsxs)(n.ZP,{container:!0,direction:"column",children:[(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(n.ZP,{container:!0,justifyContent:"space-between",children:(0,m.jsx)(n.ZP,{item:!0,display:"flex",alignItems:"center"})})}),(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsxs)(n.ZP,{container:!0,alignItems:"center",justifyContent:"center",position:"top",children:[(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(l.Z,{sx:{fontSize:"2.125rem",fontWeight:500,mr:1,mt:1.75,mb:.75},children:null===i||void 0===i?void 0:i.length})}),(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(c.Z,{sx:{cursor:"pointer",...a.typography.smallAvatar,backgroundColor:a.palette.primary[200],color:a.palette.primary.dark},children:(0,m.jsx)(w.Z,{fontSize:"inherit"})})})]})}),(0,m.jsx)(n.ZP,{item:!0,sx:{mb:1.25},children:(0,m.jsx)(l.Z,{sx:{fontSize:"1rem",fontWeight:500,color:a.palette.primary.light,textAlign:"center"},children:"Total Leads"})})]})})})})},D=i(48310),S=i(67216),z=i(32600),I=i(83213);var E=()=>(0,m.jsxs)(h.Z,{sx:{p:2},children:[(0,m.jsx)(D.Z,{sx:{py:0},children:(0,m.jsxs)(S.ZP,{alignItems:"center",disableGutters:!0,sx:{py:0},children:[(0,m.jsx)(z.Z,{children:(0,m.jsx)(p.Z,{variant:"rectangular",width:44,height:44})}),(0,m.jsx)(I.Z,{sx:{py:0},primary:(0,m.jsx)(p.Z,{variant:"rectangular",height:20}),secondary:(0,m.jsx)(p.Z,{variant:"text"})})]})}),(0,m.jsx)(D.Z,{sx:{py:0},children:(0,m.jsxs)(S.ZP,{alignItems:"center",disableGutters:!0,sx:{py:0},children:[(0,m.jsx)(z.Z,{children:(0,m.jsx)(p.Z,{variant:"rectangular",width:44,height:44})}),(0,m.jsx)(I.Z,{sx:{py:0},primary:(0,m.jsx)(p.Z,{variant:"rectangular",height:20}),secondary:(0,m.jsx)(p.Z,{variant:"text"})})]})})]}),L=i(21799);const R=(0,s.ZP)(d.Z)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.primary.dark,color:"#fff",overflow:"hidden",position:"relative","&>div":{position:"relative",zIndex:5},"&:after":{content:'""',position:"absolute",width:210,height:210,background:t.palette.primary[800],borderRadius:"50%",zIndex:1,top:-85,right:-95,[t.breakpoints.down("sm")]:{top:-105,right:-140}},"&:before":{content:'""',position:"absolute",zIndex:1,width:210,height:210,background:t.palette.primary[800],borderRadius:"50%",top:-125,right:-15,opacity:.5,[t.breakpoints.down("sm")]:{top:-155,right:-70}}}}));var W=e=>{let{isLoading:t,propertyData:i}=e;const a=(0,r.Z)();return(0,m.jsx)(m.Fragment,{children:t?(0,m.jsx)(E,{}):(0,m.jsx)(R,{border:!1,content:!1,children:(0,m.jsx)(o.Z,{sx:{p:2.25},children:(0,m.jsxs)(n.ZP,{container:!0,direction:"column",children:[(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsxs)(n.ZP,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(l.Z,{sx:{fontSize:"2.125rem",fontWeight:500,mr:1,mt:1.75,mb:.75},children:i.length})}),(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(c.Z,{sx:{cursor:"pointer",...a.typography.smallAvatar,backgroundColor:a.palette.primary[200],color:a.palette.primary.dark},children:(0,m.jsx)(L.Z,{fontSize:"inherit"})})})]})}),(0,m.jsx)(n.ZP,{item:!0,sx:{mb:1.25},children:(0,m.jsx)(l.Z,{sx:{fontSize:"1rem",fontWeight:500,color:a.palette.primary.light,textAlign:"center"},children:"Total Properties"})})]})})})})},A=i(97177);const T=(0,s.ZP)(d.Z)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.secondary.dark,color:"#fff",overflow:"hidden",position:"relative","&:after":{content:'""',position:"absolute",width:210,height:210,borderRadius:"50%",top:-85,right:-95,[t.breakpoints.down("sm")]:{top:-105,right:-140}},"&:before":{zIndex:-1,content:'""',position:"absolute",width:210,height:210,background:t.palette.secondary[800],borderRadius:"50%",top:-125,right:-15,opacity:.5,[t.breakpoints.down("sm")]:{top:-155,right:-70}}}}));var $=e=>{let{isLoading:t,taskData:i}=e;const a=(0,r.Z)();return(0,m.jsx)(m.Fragment,{children:t?(0,m.jsx)(E,{}):(0,m.jsx)(T,{border:!1,content:!1,children:(0,m.jsx)(o.Z,{sx:{p:2.25},children:(0,m.jsxs)(n.ZP,{container:!0,direction:"column",children:[(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsxs)(n.ZP,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(l.Z,{sx:{fontSize:"2.125rem",fontWeight:500,mr:1,mt:1.75,mb:.75},children:null===i||void 0===i?void 0:i.length})}),(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(c.Z,{sx:{cursor:"pointer",...a.typography.smallAvatar,backgroundColor:a.palette.secondary[200]},children:(0,m.jsx)(A.Z,{fontSize:"inherit"})})})]})}),(0,m.jsx)(n.ZP,{item:!0,sx:{mb:1.25},children:(0,m.jsx)(l.Z,{sx:{fontSize:"1rem",fontWeight:500,color:a.palette.primary.light,textAlign:"center"},children:"Total Tasks"})})]})})})})},_=i(12401);var F=()=>(0,m.jsx)(h.Z,{children:(0,m.jsx)(x.Z,{children:(0,m.jsxs)(n.ZP,{container:!0,spacing:_.dv,children:[(0,m.jsx)(n.ZP,{item:!0,xs:12,children:(0,m.jsxs)(n.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",spacing:_.dv,children:[(0,m.jsx)(n.ZP,{item:!0,xs:!0,zeroMinWidth:!0,children:(0,m.jsxs)(n.ZP,{container:!0,spacing:1,children:[(0,m.jsx)(n.ZP,{item:!0,xs:12,children:(0,m.jsx)(p.Z,{variant:"text"})}),(0,m.jsx)(n.ZP,{item:!0,xs:12,children:(0,m.jsx)(p.Z,{variant:"rectangular",height:20})})]})}),(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(p.Z,{variant:"rectangular",height:50,width:80})})]})}),(0,m.jsx)(n.ZP,{item:!0,xs:12,children:(0,m.jsx)(p.Z,{variant:"rectangular",height:530})})]})})});var O=e=>{let{isLoading:t,propertyData:i,taskData:s,contactData:o,leadData:c,meetingData:h,callData:x,emailData:p}=e;const[g,u]=(0,a.useState)("today"),j=(0,r.Z)(),Z=(0,b.v9)((e=>e.customization)),{navType:y}=Z,{primary:v}=j.palette.text,w=j.palette.dark.light,k=j.palette.grey[200],C=j.palette.grey[500],D=j.palette.primary[200],S=j.palette.primary.dark,z=j.palette.secondary.main,I=j.palette.secondary.light,E={height:480,type:"bar",options:{chart:{id:"bar-chart",stacked:!0,toolbar:{show:!0},zoom:{enabled:!0}},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],plotOptions:{bar:{horizontal:!1,columnWidth:"40%"}},xaxis:{type:"reports",categories:["Lead","Contact","Property","Task","Meeting","Email","Call"]},legend:{show:!0,fontSize:"14px",fontFamily:"'Roboto', sans-serif",position:"bottom",offsetX:20,labels:{useSeriesColors:!1},markers:{width:16,height:16,radius:5},itemMargin:{horizontal:15,vertical:8}},fill:{type:"solid"},dataLabels:{enabled:!1},grid:{show:!0}},series:[{name:"Data",data:[c.length,o.length,i.length,s.length,h.length,p.length,x.length]}]};return(0,a.useEffect)((()=>{const e={...E.options,colors:[D,S,z,I],xaxis:{labels:{style:{colors:[v,v,v,v,v,v,v,v,v,v,v,v]}}},yaxis:{labels:{style:{colors:[v]}}},grid:{borderColor:k},tooltip:{theme:"light"},legend:{labels:{colors:C}}};t||f().exec("bar-chart","updateOptions",e)}),[y,D,S,z,I,v,w,k,t,C]),(0,m.jsx)(m.Fragment,{children:t?(0,m.jsx)(F,{}):(0,m.jsx)(d.Z,{children:(0,m.jsxs)(n.ZP,{container:!0,spacing:_.dv,children:[(0,m.jsx)(n.ZP,{item:!0,xs:12,children:(0,m.jsx)(n.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(n.ZP,{container:!0,direction:"column",spacing:1,children:(0,m.jsx)(n.ZP,{item:!0,children:(0,m.jsx)(l.Z,{variant:"subtitle2",children:"Report"})})})})})}),(0,m.jsx)(n.ZP,{item:!0,xs:12,children:(0,m.jsx)(P.Z,{...E})})]})})})};i(70816),i(72632);var M=e=>{const{dashboard:t}=e,[i,n]=(0,a.useState)({}),[r,s]=(0,a.useState)(new Date(new Date-12096e5)),[c,h]=(0,a.useState)(new Date),[x,p]=(0,a.useState)("all"),[g,u]=(0,a.useState)("day"),j=JSON.parse(localStorage.getItem("user"));console.log(j,"user details");const Z={EmailDetails:{Emails:[{date:j.updatedDate,EmailCount:j.emailsent},{date:Date(),EmailCount:j.emailsent}]},outboundcalls:{Calls:[{date:j.updatedDate,Callcount:j.outboundcall},{date:Date(),EmailCount:j.outboundcall}]}};(0,a.useEffect)((()=>{n(Z)}),[]);(0,a.useEffect)((()=>{(async()=>{n(Z)})()}),[r,c,g]);const y=Object.keys(i).map((e=>{const t=i[e];let a=[];return null!==t&&void 0!==t&&t.Emails&&(a=a.concat(t.Emails.map((e=>({x:e.date,y:e.EmailCount,type:"Email"}))))),null!==t&&void 0!==t&&t.Calls&&(a=a.concat(t.Calls.map((e=>({x:e.date,y:e.Callcount,type:"Outbound Call"}))))),{name:e,data:a}})),b="all"===x?y:y.filter((e=>e.name===x));return(0,m.jsxs)(d.Z,{children:[!t&&(0,m.jsx)(o.Z,{display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between",mb:4,children:(0,m.jsx)(o.Z,{width:{base:"100%",md:"auto"},display:"flex",justifyContent:"right",mb:{base:3,md:"auto"}})}),(0,m.jsxs)(o.Z,{id:"chart",mb:4,children:[(0,m.jsx)(l.Z,{variant:"h6",mb:2,children:"Report"}),(0,m.jsx)(P.Z,{options:{chart:{id:"line-chart"},xaxis:{type:"datetime"},yaxis:{title:{text:"Count"}},dataLabels:{enabled:!0},stroke:{curve:"smooth"}},series:b,type:"line",height:400})]})]})};var G=()=>{(0,r.Z)();const[e,t]=(0,a.useState)(!0);(0,a.useEffect)((()=>{t(!1)}),[]);const[i,s]=(0,a.useState)([]),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[h,x]=(0,a.useState)([]),[p,g]=(0,a.useState)([]),[j,Z]=(0,a.useState)([]),[b,v]=(0,a.useState)([]),f=JSON.parse(localStorage.getItem("user"));return(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,u.ac)("admin"===f.role?"api/contact/viewallcontacts":`api/contact/viewusercontacts/${f._id}`);"admin"===f.role?s(e.data.contactDetails):s(e.data)}catch(e){console.log(e)}})(),(async()=>{try{const e=await(0,u.ac)("admin"===f.role?"api/lead/viewallleads":`api/lead/viewuserleads/${f._id}`);d(null===e||void 0===e?void 0:e.data)}catch(e){console.log(e)}})(),(async()=>{try{var e;const t=await(0,u.ac)("admin"===f.role?"api/property/viewallproperties":`api/property/viewuserproperty/${f._id}`);x(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.properties)}catch(t){console.log(t)}})(),(async()=>{try{var e;const t=await(0,u.ac)("admin"===f.role?"api/task/viewalltasks":`api/task/viewusertasks/${f._id}`);l(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.taskData)}catch(t){console.log(t)}})(),(async()=>{try{const e=await(0,u.ac)("admin"===f.role?"api/meeting/viewallmeetings":`api/meeting/viewusermeetings/${f._id}`);g(null===e||void 0===e?void 0:e.data)}catch(e){console.log(e)}})(),(async()=>{try{const e=await(0,u.ac)("admin"===f.role?"api/phoneCall/viewallcalls":`api/phoneCall/viewusercalls/${f._id}`);v(null===e||void 0===e?void 0:e.data)}catch(e){console.log(e)}})(),(async()=>{try{const e=await(0,u.ac)("admin"===f.role?"api/email/viewallemails":`api/email/viewuseremails/${f._id}`);Z(null===e||void 0===e?void 0:e.data)}catch(e){console.log(e)}})()}),[]),(0,m.jsxs)(n.ZP,{container:!0,spacing:_.dv,children:[(0,m.jsx)(n.ZP,{item:!0,xs:12,children:(0,m.jsxs)(n.ZP,{container:!0,spacing:_.dv,children:[(0,m.jsx)(n.ZP,{item:!0,lg:3,md:6,sm:6,xs:12,children:(0,m.jsx)(C,{isLoading:e,leadData:c})}),(0,m.jsx)(n.ZP,{item:!0,lg:3,md:6,sm:6,xs:12,children:(0,m.jsx)(y,{isLoading:e,contactData:i})}),(0,m.jsx)(n.ZP,{item:!0,sm:6,xs:12,md:6,lg:3,children:(0,m.jsx)(W,{isLoading:e,propertyData:h})}),(0,m.jsx)(n.ZP,{item:!0,sm:6,xs:12,md:6,lg:3,children:(0,m.jsx)($,{isLoading:e,taskData:o})})]})}),(0,m.jsx)(n.ZP,{item:!0,xs:12,children:(0,m.jsxs)(n.ZP,{container:!0,spacing:_.dv,children:[(0,m.jsx)(n.ZP,{item:!0,xs:12,md:6,children:(0,m.jsx)(M,{isLoading:e})}),(0,m.jsx)(n.ZP,{item:!0,xs:12,md:6,children:(0,m.jsx)(O,{isLoading:e,propertyData:h,taskData:o,contactData:i,leadData:c,emailData:j,callData:b,meetingData:p})})]})})]})}}}]);