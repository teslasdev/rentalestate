"use strict";(self.webpackChunkclient360=self.webpackChunkclient360||[]).push([[78],{60078:function(e,l,i){i.r(l);var o=i(97890),a=i(77276),d=i(85833),n=i(65954),r=i(98616),t=i(67662),s=i(47313),c=i(41806),u=i(47825),x=i(42832),p=i(61113),v=i(31095),h=i(73428),g=i(36305),m=i(10237),b=i(51997),j=i(17592),C=i(17551),w=i(83965),Z=i(43997),f=i(85582),S=i(51405),k=i(6210),N=i(47131),R=i(16633),y=i(39810),_=i(24249),M=i(46808),z=i(5833),E=i(46417);const I=(0,j.ZP)((e=>(0,E.jsx)(f.Z,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},...e})))((e=>{let{theme:l}=e;return{"& .MuiPaper-root":{borderRadius:6,marginTop:l.spacing(1),minWidth:180,color:"light"===l.palette.mode?"rgb(55, 65, 81)":l.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:l.palette.text.secondary,marginRight:l.spacing(1.5)},"&:active":{backgroundColor:(0,C.Fq)(l.palette.primary.main,l.palette.action.selectedOpacity)}}}}}));l.default=()=>{const e=(0,o.s0)(),[l,i]=(0,s.useState)(!1),[j,C]=(0,s.useState)(!1),[f,L]=(0,s.useState)(!1),[O,P]=s.useState(null),[F,$]=(0,s.useState)(!1),[B,T]=(0,s.useState)(!1),[q,A]=(0,s.useState)([]),[D,J]=(0,s.useState)([]),[Q,V]=(0,s.useState)(null),W=JSON.parse(localStorage.getItem("user")),G=O,H=()=>{P(null)};(0,s.useEffect)((()=>{(async()=>{try{const e=await(0,k.ac)("admin"===W.role?"api/lead/viewallleads":`api/lead/viewuserleads/${W._id}`);A(null===e||void 0===e?void 0:e.data)}catch(e){console.log(e)}})()}),[l,j,f]);let K=0;const U=[{field:"id",headerName:"#",flex:1,renderCell:()=>(0,E.jsx)(c.Z,{children:K+=1})},{field:"leadName",headerName:"Name",flex:1,cellClassName:"name-column--cell name-column--cell--capitalize",renderCell:l=>(0,E.jsx)(c.Z,{onClick:()=>{e(`/dashboard/lead/view/${null===l||void 0===l?void 0:l.row._id}`)},children:null===l||void 0===l?void 0:l.value})},{field:"leadStatus",headerName:"Status",flex:1,cellClassName:"name-column--cell--capitalize",renderCell:e=>{var l,i;return(0,E.jsx)(c.Z,{sx:"active"==(null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.toLowerCase())?{backgroundColor:"#01B574",color:"white",padding:"4px",borderRadius:"5px"}:"pending"==(null===e||void 0===e||null===(i=e.value)||void 0===i?void 0:i.toLowerCase())?{backgroundColor:"#ECC94B",color:"white",padding:"4px",borderRadius:"5px"}:{backgroundColor:"#eb7b74",color:"white",padding:"4px",borderRadius:"5px"},children:null===e||void 0===e?void 0:e.value})}},{field:"leadEmail",headerName:"Email",flex:1},{field:"leadPhoneNumber",headerName:"Phone Number",flex:1},{field:"leadOwner",headerName:"Owner",flex:1},{field:"leadScore",headerName:"Score",flex:1,renderCell:e=>(0,E.jsx)(c.Z,{sx:(null===e||void 0===e?void 0:e.value)>=80||(null===e||void 0===e?void 0:e.value)>=50&&(null===e||void 0===e?void 0:e.value)<80?{color:"#01B574"}:{color:"#eb7b74"},children:null===e||void 0===e?void 0:e.value})},{field:"action",headerName:"Action",flex:1,renderCell:l=>(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)("div",{children:[(0,E.jsx)(N.Z,{"aria-label":"more",id:"long-button","aria-controls":G?"long-menu":void 0,"aria-expanded":G?"true":void 0,"aria-haspopup":"true",onClick:()=>{return e=null===l||void 0===l?void 0:l.row._id,void P(e);var e},children:(0,E.jsx)(Z.Z,{})}),(0,E.jsxs)(I,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},anchorEl:O===(null===l||void 0===l?void 0:l.row._id),open:G===(null===l||void 0===l?void 0:l.row._id),onClose:H,children:[(0,E.jsxs)(S.Z,{onClick:()=>{return e=null===l||void 0===l?void 0:l.row,J(e),C(!0),void console.log(j);var e},disableRipple:!0,children:[(0,E.jsx)(n.Z,{style:{marginRight:"8px"}}),"Edit"]}),(0,E.jsxs)(S.Z,{onClick:()=>{return e=null===l||void 0===l?void 0:l.row._id,V(e),void T(!0);var e},disableRipple:!0,children:[(0,E.jsx)(g.Z,{style:{marginRight:"8px"}}),"Create Call"]}),(0,E.jsxs)(S.Z,{onClick:()=>{return e=null===l||void 0===l?void 0:l.row._id,V(e),void $(!0);var e},disableRipple:!0,children:[(0,E.jsx)(w.Z,{style:{marginRight:"8px"}}),"Send Email"]}),(0,E.jsxs)(S.Z,{onClick:()=>{return i=null===l||void 0===l?void 0:l.row._id,void e(`/dashboard/lead/view/${i}`);var i},disableRipple:!0,children:[(0,E.jsx)(m.Z,{style:{marginRight:"8px",color:"green"}}),"View"]}),(0,E.jsxs)(S.Z,{onClick:()=>{return e=null===l||void 0===l?void 0:l.row._id,console.log(e),V(e),void L(!0);var e},sx:{color:"red"},disableRipple:!0,children:[(0,E.jsx)(b.Z,{style:{marginRight:"8px",color:"red"}}),"Delete"]})]})]})})}];return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(R.Z,{open:l,handleClose:()=>i(!1)}),(0,E.jsx)(y.Z,{open:f,handleClose:()=>L(!1),id:Q}),(0,E.jsx)(_.Z,{open:j,handleClose:()=>C(!1),data:D}),(0,E.jsx)(M.Z,{open:F,onClose:()=>$(!1),id:Q}),(0,E.jsx)(z.Z,{open:B,onClose:()=>T(!1),id:Q}),(0,E.jsxs)(u.Z,{children:[(0,E.jsxs)(x.Z,{direction:"row",alignItems:"center",mb:5,justifyContent:"space-between",children:[(0,E.jsx)(p.Z,{variant:"h4",children:"Lead-Management"}),(0,E.jsx)(x.Z,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:2,children:(0,E.jsx)(v.Z,{variant:"contained",startIcon:(0,E.jsx)(r.Z,{icon:"eva:plus-fill"}),onClick:()=>i(!0),children:"New Lead"})})]}),(0,E.jsx)(t.Z,{children:(0,E.jsx)(c.Z,{width:"100%",children:(0,E.jsx)(h.Z,{style:{height:"600px",paddingTop:"15px"},children:q&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(p.Z,{variant:"h4",sx:{margin:"2px 15px"},children:["Leads ( ",null===q||void 0===q?void 0:q.length," )"]}),(0,E.jsx)(a._$,{rows:q,columns:U,checkboxSelection:!0,getRowId:e=>null===e||void 0===e?void 0:e._id,slots:{toolbar:d.n},slotProps:{toolbar:{showQuickFilter:!0}}})]})})})})]})]})}}}]);